{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container">
    <h1>Admin Dashboard</h1>

    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ total_users }}</div>
            <div class="stat-label">Users</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ total_gigs }}</div>
            <div class="stat-label">Gigs</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ total_posts }}</div>
            <div class="stat-label">Posts</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ total_courses }}</div>
            <div class="stat-label">Courses</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card mb-4">
        <h2 class="card-title">Quick Actions</h2>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="{{ url_for('admin.manage_users') }}" class="btn btn-primary">Manage Users</a>
            <a href="{{ url_for('admin.create_user') }}" class="btn btn-primary">Create User</a>
            <a href="{{ url_for('admin.manage_content') }}" class="btn btn-primary">Manage Content</a>
        </div>
    </div>

    <!-- Recent Activity -->
    <h2>Recent Activity</h2>

    <div class="grid-2">
        <div class="card">
            <h3 class="card-title">Recent Users</h3>
            {% if recent_users %}
            <ul style="list-style: none; padding: 0;">
                {% for user in recent_users %}
                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--light-gray);">
                    <a href="{{ url_for('profile.view_profile', username=user.username) }}">
                        {{ user.username }}
                    </a>
                    <span style="color: var(--gray); font-size: 0.875rem;">
                        ({{ user.role }})
                    </span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No users yet.</p>
            {% endif %}
        </div>

        <div class="card">
            <h3 class="card-title">Recent Gigs</h3>
            {% if recent_gigs %}
            <ul style="list-style: none; padding: 0;">
                {% for gig in recent_gigs %}
                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--light-gray);">
                    {{ gig.subject }} by {{ gig.user.username }}
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No gigs yet.</p>
            {% endif %}
        </div>

        <div class="card">
            <h3 class="card-title">Recent Posts</h3>
            {% if recent_posts %}
            <ul style="list-style: none; padding: 0;">
                {% for post in recent_posts %}
                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--light-gray);">
                    <a href="{{ url_for('posts.view_post', post_id=post.id) }}">
                        {{ post.title }}
                    </a>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No posts yet.</p>
            {% endif %}
        </div>

        <div class="card">
            <h3 class="card-title">Recent Courses</h3>
            {% if recent_courses %}
            <ul style="list-style: none; padding: 0;">
                {% for course in recent_courses %}
                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--light-gray);">
                    {{ course.title }} by {{ course.teacher.username }}
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No courses yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}